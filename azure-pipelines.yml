trigger:
- master

jobs:
- job: Windows
  pool:
    vmImage: VS2017-Win2016
  variables:
    PATH: C:\Swift\toolchain\Developer\Toolchains\unknown-Asserts-development.xctoolchain\usr\bin
  steps:
    - powershell: Invoke-WebRequest 'https://compnerd.visualstudio.com/3133d6ab-80a8-4996-ac4f-03df25cd3224/_apis/build/builds/109/artifacts?artifactName=toolchain&api-version=5.0&%24format=zip' -outfile .\toolchain.zip
      displayName: Download Swift toolchain for Windows
    - powershell: Expand-Archive toolchain.zip -DestinationPath C:\Swift
      displayName: Install Swift
    - powershell: swift.exe --version
      displayName: Print Swift Version
    - powershell: swift.exe build
      displayName: Swift Build
    - powershell: swift.exe test
      displayName: Swift Test
